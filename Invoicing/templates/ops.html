<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big Pic Solutions - Operations</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Newsreader:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/ops.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-stars" id="header-stars"></div>
            <div class="header-glow"></div>
            <div class="header-content">
                <div class="header-logo">
                    <div class="logo-mark">
                        <svg viewBox="0 0 32 32" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="16" cy="16" r="12"/>
                            <circle cx="16" cy="16" r="4"/>
                            <line x1="16" y1="4" x2="16" y2="8"/>
                            <line x1="16" y1="24" x2="16" y2="28"/>
                            <line x1="4" y1="16" x2="8" y2="16"/>
                            <line x1="24" y1="16" x2="28" y2="16"/>
                        </svg>
                    </div>
                    <div class="header-text">
                        <h1>Big Pic Solutions</h1>
                        <p class="subtitle">Business Operations</p>
                    </div>
                    <a href="/" class="header-nav-link">Invoicing</a>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="scorecard">Scorecard</button>
            <button class="nav-tab" data-tab="pipeline">Pipeline</button>
            <button class="nav-tab" data-tab="timer">Time Tracker</button>
        </nav>

        <!-- Scorecard Tab -->
        <div class="tab-content active" id="scorecard">
            <div class="scorecard-grid">
                <div class="score-card">
                    <div class="score-label">This Week</div>
                    <div class="score-value" id="sc-week-revenue">$0</div>
                    <div class="score-target">of $480.77 target</div>
                    <div class="progress-bar"><div class="progress-fill" id="sc-week-progress"></div></div>
                </div>
                <div class="score-card">
                    <div class="score-label">This Month</div>
                    <div class="score-value" id="sc-month-revenue">$0</div>
                    <div class="score-target">of $2,070 target</div>
                    <div class="progress-bar"><div class="progress-fill" id="sc-month-progress"></div></div>
                </div>
                <div class="score-card">
                    <div class="score-label">Hours Billed</div>
                    <div class="score-value" id="sc-month-hours">0</div>
                    <div class="score-target">this month</div>
                </div>
                <div class="score-card">
                    <div class="score-label">Pipeline Value</div>
                    <div class="score-value" id="sc-pipeline-value">$0</div>
                    <div class="score-target"><span id="sc-active-leads">0</span> active leads</div>
                </div>
            </div>

            <div class="scorecard-row">
                <div class="score-card score-card-wide">
                    <div class="score-label">Follow-ups Due Today</div>
                    <div class="score-value score-alert" id="sc-followups-due">0</div>
                </div>
                <div class="score-card score-card-wide">
                    <div class="score-label">Year to Date</div>
                    <div class="score-value" id="sc-year-revenue">$0</div>
                </div>
            </div>

            <!-- Daily Log -->
            <div class="section-header" style="margin-top: 2rem;">
                <h2>Daily Log</h2>
                <button class="btn btn-primary" id="btn-log-today">Log Today</button>
            </div>
            <div id="daily-log-list" class="jobs-list">
                <p class="empty-state">No daily logs yet</p>
            </div>

            <!-- Daily Log Modal -->
            <div class="modal" id="daily-log-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Log Daily Score</h3>
                        <button class="close-btn" id="close-daily-log-modal">&times;</button>
                    </div>
                    <form id="daily-log-form">
                        <div class="form-group">
                            <label for="log-date">Date</label>
                            <input type="date" id="log-date" name="score_date" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="log-hours">Hours Billed</label>
                                <input type="number" id="log-hours" name="hours_billed" step="0.25" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label for="log-outreach">Outreach Actions</label>
                                <input type="number" id="log-outreach" name="outreach_count" min="0" value="0">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="log-notes">Notes</label>
                            <textarea id="log-notes" name="notes" rows="3" placeholder="What did you accomplish today?"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save</button>
                            <button type="button" class="btn btn-secondary" id="cancel-daily-log">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Pipeline Tab -->
        <div class="tab-content" id="pipeline">
            <div class="section-header">
                <h2>Sales Pipeline</h2>
                <button class="btn btn-primary" id="btn-add-lead">+ Add Lead</button>
            </div>

            <!-- Pipeline Filter -->
            <div class="pipeline-filters">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="prospect">Prospect</button>
                <button class="filter-btn" data-filter="contacted">Contacted</button>
                <button class="filter-btn" data-filter="meeting">Meeting</button>
                <button class="filter-btn" data-filter="proposal">Proposal</button>
                <button class="filter-btn" data-filter="won">Won</button>
                <button class="filter-btn" data-filter="lost">Lost</button>
            </div>

            <div id="leads-list" class="leads-list">
                <p class="empty-state">No leads yet - start your outreach!</p>
            </div>

            <!-- Add/Edit Lead Modal -->
            <div class="modal" id="lead-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 id="lead-modal-title">Add New Lead</h3>
                        <button class="close-btn" id="close-lead-modal">&times;</button>
                    </div>
                    <form id="lead-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lead-name">Contact Name *</label>
                                <input type="text" id="lead-name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="lead-company">Company</label>
                                <input type="text" id="lead-company" name="company">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lead-email">Email</label>
                                <input type="email" id="lead-email" name="email">
                            </div>
                            <div class="form-group">
                                <label for="lead-phone">Phone</label>
                                <input type="tel" id="lead-phone" name="phone">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lead-source">Source</label>
                                <select id="lead-source" name="source">
                                    <option value="">-- Select --</option>
                                    <option value="linkedin">LinkedIn</option>
                                    <option value="referral">Referral</option>
                                    <option value="cold-email">Cold Email</option>
                                    <option value="website">Website</option>
                                    <option value="network">Network</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="lead-status">Status</label>
                                <select id="lead-status" name="status">
                                    <option value="prospect">Prospect</option>
                                    <option value="contacted">Contacted</option>
                                    <option value="meeting">Meeting</option>
                                    <option value="proposal">Proposal</option>
                                    <option value="won">Won</option>
                                    <option value="lost">Lost</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="lead-value">Pipeline Value ($)</label>
                                <input type="number" id="lead-value" name="pipeline_value" step="0.01" min="0" value="0">
                            </div>
                            <div class="form-group">
                                <label for="lead-next-followup">Next Follow-up</label>
                                <input type="date" id="lead-next-followup" name="next_followup">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="lead-notes">Notes</label>
                            <textarea id="lead-notes" name="notes" rows="3" placeholder="Context, conversation history, next steps..."></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Save Lead</button>
                            <button type="button" class="btn btn-secondary" id="cancel-lead">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Timer Tab -->
        <div class="tab-content" id="timer">
            <div class="section-header">
                <h2>Time Tracker</h2>
            </div>

            <div class="timer-container">
                <div class="timer-display">
                    <div class="timer-clock" id="timer-clock">00:00:00</div>
                    <div class="timer-status" id="timer-status">Ready</div>
                </div>

                <div class="form-group">
                    <label for="timer-client">Client</label>
                    <select id="timer-client" name="client_id">
                        <option value="">-- Select a client --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="timer-description">What are you working on?</label>
                    <input type="text" id="timer-description" placeholder="Brief description of the task">
                </div>

                <div class="timer-actions">
                    <button class="btn btn-primary btn-large" id="btn-timer-start">Start Timer</button>
                    <button class="btn btn-secondary btn-large" id="btn-timer-stop" style="display:none;">Stop & Save</button>
                </div>
            </div>

            <div class="section-header" style="margin-top: 2rem;">
                <h2>Today's Sessions</h2>
            </div>
            <div id="timer-sessions" class="jobs-list">
                <p class="empty-state">No sessions today</p>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/ops.js') }}"></script>
</body>
</html>
